## 分布式环境的特点

#### 特点：

分布性：

并发性：程序在运行过程中，如同一个分布式系统中的多个节点，同时访问一个共享资源，

无序性：进程间的消息通信，会出现不一致问题

#### 面临的问题：

网络通信问题：网络本身的不可靠性

网络分区问题（脑裂）：网络发生异常导致分布式系统中部分节点之间的网络延迟不断增大，最终导致组成

分布式架构的所有节点，只有部分节点能够正常通信；

三态：正常是成功状态，失败状态，还有超时状态

分布式事务：保证事务的一致性，同时成功，同时失败ACID（原子性，一致性，隔离性，持久性）

#### 中心化和去中心化：

中心化：需要有一个领导（冷备或者热备），没有领导干不了活

去中心化：没有领导

很多架构思想采用的是：当集群发生故障的时候，集群中的人群会自动选举出一个新的领导，经典的就是：zookeeper

#### 经典的CAP/BASE理论

**CAP**（Consistency一致性，Availability可用性，Partition-tolerance分区容错）

这三个特性无法同时满足在分布式架构系统中；CAP理论仅仅使用Nosql场景，不适用数据库系统，一般会有CP、AP两种特性

一致性：所有节点上的数据时刻保持一致

可用性：每个请求都能够收到一个对应的响应，无论响应成功或者失败

分区容错：系统出现脑裂以后，可能导致某些server与集群中的其他机器失去联系



**BASE**（Basically available, Soft-state，eventually consistent）：

基于CAP理论，CAP理论并不适用数据库事务（因为更新一些错误的数据而导致数据出现紊乱，无论什么样的数据库高可用方案都是徒劳的），XA事务虽然可以保证数据库在分布式系统下的ACID特性，会带来一些性能问题;

Basically available：基本可用，比如：数据库采用分片模式，把100W的用户数据分布在5个实例上，如果破坏了其中的一个实例，仍然可以保证百分之八十的用户可用；

soft-state：软状态，在基于client-server模式的系统中，server端是否有状态，决定了系统是否具备良好的水平扩展，负载均衡，故障恢复等特性。server端承诺会维护client端状态数据，这个状态仅仅维持一小段时间，这段时间以后，server端就会丢弃这个状态，恢复正常状态；

Eventually consistent：数据最终一致性；





