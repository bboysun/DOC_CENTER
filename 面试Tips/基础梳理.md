# 基础梳理

## 一、基本知识

1. equals() 和 hashcode() 的理解

   为什么重写 equals 方法时必须要重写 hashcode 呢？因为需要容器类中在判断元素是否相等时都会先判断 hashcode 然后再判断 equals 方法。

   那么有没有可能两个不相等的对象有相同的 hashcode 值呢？有可能，因为 hash 碰撞。

   那么有没有可能两个相同的对象有不同的 hashcode 值呢？不可能

2. Java 有哪几种数据类型？

   boolean: 4 字节

   char: 2 字节

   byte: 1 字节

   int: 4 字节

   long: 8 字节

   double: 8 字节

   float: 4 字节 

   short: 2 字节

3. SPI 机制

   SPI (service provider interface) ，是 JDK 内置的一种服务发现机制，可以用来启用框架扩展和替换组件，主要是被框架的开发人员使用，比如 java.sql.Driver 接口，其他不同厂商可以针对同一接口做出不同的实现，MySQL和PgSQL都有不同的实现提供给用户，而java 的 SPI 机制可以为某个接口寻找服务实现。java 中的SPI机制主要思想就是将装配的控制权移到程序之外，在模块化设计中这个机制尤其重要，核心思想就是 解耦。

4. 虚引用，弱引用，强引用

5. JVM 参数配置

   -Dsun.zip.disableMemoryMapping=true，JVM 在装在 jar 文件时，如果 jar 文件被修改或更新，会引发应用服务 crash，如果开启了这个参数，应用程序在遇到以上问题便不会 crash。

   -XX:MaxGCPauseMillis 参数用于设置最大停顿时间，它的参数运行值是一个大于0的毫秒数，收集器将尽力保证垃圾回收时间不超过设定值，系统运行的需要回收的垃圾总量是固定的，缩短停顿时间的同时会增大回收频度。配合使用 G1 垃圾回收器 -XX:+UseG1GC -XX:MaxGCPauseMillis=100 -XX:+G1ParallelFullGC

   -XX:+PrintGCDetails 打印输出 GC 日志详情。

   -XX:+PrintGCDateStamps 输出gc的触发时间。

   -XX:+HeapDumpOnOutOfMemoryError，当应用程序发生 OOM 时，自动 dump 对内存文件，配合 -XX:HeapDumpPath
   =/usr/local/app/ 指定 dump 文件目录，方便后续使用 visualVM 排查。

   -Xloggc:/usr/local/app/gc.log -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogF
   ileSize=4096k 配置 gc 日志目录，文件策略，文件个数，文件大小等。

   

   

